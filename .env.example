# DSW Timetable API - Environment Variables Example
# Copy this file to .env and fill in your values

# ============================================
# Runtime Configuration
# ============================================

# Environment: development, production
ENV=production

# ============================================
# Semester Configuration
# ============================================

# Default semester boundaries (YYYY-MM-DD)
# These are used when client doesn't specify date range
DSW_DEFAULT_FROM=2025-09-06
DSW_DEFAULT_TO=2026-02-08

# Default interval type: week, month, semester
DSW_DEFAULT_INTERVAL=semester

# ============================================
# Backend Mode
# ============================================

# Backend mode: 'live' or 'cached'
# - live: Scrape university website on each request (slower, always fresh)
# - cached: Read from Firestore preloaded data (faster, updated 2x/day)
DSW_BACKEND_MODE=cached

# Enable mock data (for testing only)
# 0 = disabled, 1 = enabled
DSW_ENABLE_MOCK=0

# ============================================
# Firestore Configuration
# ============================================

# Google Cloud Project ID
# Get this from Google Cloud Console
FIRESTORE_PROJECT_ID=your-project-id-here

# Path to Firestore service account JSON key
# This should be mounted as a volume in docker-compose
FIRESTORE_CREDENTIALS_PATH=/run/secrets/firestore-service-account.json

# For sync runner on VPS, set this to the host path:
FIRESTORE_CREDENTIALS_HOST_PATH=/srv/secrets/firestore-service-account.json

# ============================================
# Cache TTL (Time To Live)
# ============================================

# In-memory cache TTLs in seconds

# Schedule cache (for /api/groups/:id/schedule)
DSW_TTL_SCHEDULE_SECS=60

# Group search cache (for /groups/search)
# 3 days = 259200 seconds
DSW_TTL_SEARCH_SECS=259200

# Aggregate cache (for /api/groups/:id/aggregate)
# 5 hours = 18000 seconds
DSW_TTL_AGGREGATE_SECS=18000

# Teacher cache (for teacher cards)
DSW_TTL_TEACHER_SECS=18000

# ============================================
# Feature Flags
# ============================================

# JSON with feature flags (must be valid JSON)
# Available flags:
# - show_ads: Show advertisements in app
# - show_debug_menu: Show debug menu for developers
# - enable_analytics: Enable analytics tracking
DSW_FEATURE_FLAGS_JSON={"show_ads":true,"show_debug_menu":false,"enable_analytics":false}

# Version string for feature flags (for cache busting)
DSW_FEATURE_FLAGS_VERSION=1.0.1

# Optional: Override individual flags
# Values: "1"/"true" = enabled, "0"/"false" = disabled
# DSW_FF_SHOW_ADS=1
# DSW_FF_SHOW_DEBUG_MENU=0
# DSW_FF_ENABLE_ANALYTICS=0

# ============================================
# Feature Parameters
# ============================================

# JSON with typed parameters (must be valid JSON)
# Available parameters:
# - premium_trial_duration: Duration of premium trial in seconds
# - max_groups_per_user: Maximum groups a user can add
# - sync_interval_hours: How often to sync in background
DSW_FEATURE_PARAMS_JSON={"premium_trial_duration":86400,"max_groups_per_user":5}

# Version string for parameters
DSW_FEATURE_PARAMS_VERSION=1.0.1

# Optional: Override individual parameters
# DSW_FP_PREMIUM_TRIAL_DURATION=7200
# DSW_FP_MAX_GROUPS_PER_USER=10

# ============================================
# Notes
# ============================================

# 1. Never commit .env file to git (it's in .gitignore)
# 2. On VPS, edit docker-compose.yml to use these variables
# 3. For local development, use docker-compose with .env file
# 4. Firestore credentials must be stored securely on VPS
# 5. When changing feature flags, update version to invalidate cache
