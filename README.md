# DSW Timetable API

REST API –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∑–∞–Ω—è—Ç–∏–π —Å—Ç—É–¥–µ–Ω—Ç–∞–º Dolno≈õlƒÖskiej Szko≈Çy Wy≈ºszej.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≥—Ä—É–ø–ø –∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
- üîç –ü–æ–∏—Å–∫ –≥—Ä—É–ø–ø –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é/–∫–æ–¥—É
- üë• –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è—Ö —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏
- üöÄ –î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã: live scraping –∏ cached data (Firestore)
- ‚ö° In-memory –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (2 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å)
- üåç –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∞–π–º–∑–æ–Ω—ã Europe/Warsaw
- üéõÔ∏è Server-driven feature flags –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: Swift 6, Vapor 4
- **Database**: Google Firestore
- **Parsing**: SwiftSoup
- **Deployment**: Docker, docker-compose, nginx
- **VPS**: OVH (Poland)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Mobile     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ    Vapor     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí‚îÇ  Firestore   ‚îÇ
‚îÇ     App      ‚îÇ     ‚îÇ   API Server ‚îÇ     ‚îÇ   (Google)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üë                      ‚Üë
                            ‚îÇ                      ‚îÇ
                            ‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                            ‚îÇ              ‚îÇ SyncRunner   ‚îÇ
                            ‚îÇ              ‚îÇ (cron 2x/day)‚îÇ
                            ‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ                     ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ   University Website         ‚îÇ
                     ‚îÇ   harmonogramy.dsw.edu.pl    ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## API Endpoints

### –ü–æ–∏—Å–∫ –≥—Ä—É–ø–ø
```http
GET /groups/search?q=INF
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å—É.

### –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã + –≤—Å–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏
```http
GET /api/groups/:id/aggregate?from=2025-09-06&to=2026-02-08&type=3
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
- –ü–æ–ª–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –∑–∞ –ø–µ—Ä–∏–æ–¥
- **–í–°–ï** –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞ —Å –∏—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è–º–∏ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –Ω–∞ –¥–µ–Ω—å
```http
GET /api/groups/:id/schedule?date=2025-11-01
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É.
–ï—Å–ª–∏ `date` –Ω–µ —É–∫–∞–∑–∞–Ω - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "—Å–µ–≥–æ–¥–Ω—è" (Europe/Warsaw timezone).

**–í–∞–∂–Ω–æ**: –≠—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ live —Ä–µ–∂–∏–º–µ (scraping), –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç `DSW_BACKEND_MODE`.

### Feature Flags
```http
GET /api/feature-flags
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç feature flags –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/yourusername/Vapor-Timetable-DSW.git
cd Vapor-Timetable-DSW
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
swift package resolve
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ live —Ä–µ–∂–∏–º–µ (–±–µ–∑ Firestore):
```bash
export DSW_BACKEND_MODE=live
export DSW_ENABLE_MOCK=0
swift run DswAggregator
```

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
```bash
curl http://localhost:8080/groups/search?q=INF
```

### –î–µ–ø–ª–æ–π –Ω–∞ VPS —Å Firestore

–°–º. –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
- [docs/FIRESTORE_SETUP.md](docs/FIRESTORE_SETUP.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Firestore
- [docs/DEPLOYMENT.md](docs/DEPLOYMENT.md) - –î–µ–ø–ª–æ–π –Ω–∞ VPS
- [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

–ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Google Firestore –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á –Ω–∞ VPS –≤ `/srv/secrets/`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ API —Å–µ—Ä–≤–µ—Ä:
```bash
cd /srv/app
docker-compose up -d
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–µ—Ä–≤—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é:
```bash
docker-compose -f docker-compose.yml -f docker-compose.local.yml run --rm dsw-sync
```

5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ cron –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:
```bash
sudo bash /srv/app/scripts/setup-cron.sh
```

6. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ –Ω–∞ cached —Ä–µ–∂–∏–º:
```bash
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ docker-compose.yml:
# DSW_BACKEND_MODE=cached

docker-compose restart vapor
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
# Backend mode
DSW_BACKEND_MODE=cached          # 'live' or 'cached'

# Firestore
FIRESTORE_PROJECT_ID=your-project-id
FIRESTORE_CREDENTIALS_PATH=/run/secrets/firestore-service-account.json

# Semester defaults
DSW_DEFAULT_FROM=2025-09-06
DSW_DEFAULT_TO=2026-02-08
DSW_DEFAULT_INTERVAL=semester

# Cache TTLs (seconds)
DSW_TTL_SCHEDULE_SECS=60         # 1 minute
DSW_TTL_SEARCH_SECS=259200       # 3 days
DSW_TTL_AGGREGATE_SECS=18000     # 5 hours

# Feature flags
DSW_FEATURE_FLAGS_JSON={"show_ads":true,"show_debug_menu":false}
DSW_FEATURE_FLAGS_VERSION=1.0.1
```

–°–º. [.env.example](.env.example) –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.

## –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

### Live Mode
- –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å scraping —Å —Å–∞–π—Ç–∞ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–ª–∏ –µ—Å–ª–∏ Firestore –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

### Cached Mode (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)
- –î–∞–Ω–Ω—ã–µ —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ Firestore
- –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã (100-300ms)
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ SyncRunner 2 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å
- `/schedule` endpoint –æ—Å—Ç–∞–µ—Ç—Å—è live –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏

## –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

SyncRunner –æ–±—Ö–æ–¥–∏—Ç –≤—Å–µ ~1400 –≥—Ä—É–ø–ø –∏ —Å–æ–±–∏—Ä–∞–µ—Ç:
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã
- –ö–∞—Ä—Ç–æ—á–∫–∏ –≤—Å–µ—Ö –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π (~500)
- –†–∞—Å–ø–∏—Å–∞–Ω–∏—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π

–ü—Ä–æ—Ü–µ—Å—Å:
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 30-60 –º–∏–Ω—É—Ç
- Throttling: 300-1000ms –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –≤ –ø–∞–º—è—Ç–∏
- –ó–∞–ø–∏—Å—å –≤ Firestore –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏

–ó–∞–ø—É—Å–∫:
```bash
# –í—Ä—É—á–Ω—É—é
docker-compose -f docker-compose.yml -f docker-compose.local.yml run --rm dsw-sync

# –ò–ª–∏ —á–µ—Ä–µ–∑ cron —Å–∫—Ä–∏–ø—Ç
sudo /srv/app/scripts/sync-runner.sh

# –õ–æ–≥–∏
tail -f /var/log/dsw-sync.log
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Sources/
‚îú‚îÄ‚îÄ DswAggregator/              # –û–±—â–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (DswCore)
‚îÇ   ‚îú‚îÄ‚îÄ Domain/                 # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Models/             # DTO (AggregateResponse, etc.)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Utils/              # –£—Ç–∏–ª–∏—Ç—ã (timezone, parsers)
‚îÇ   ‚îú‚îÄ‚îÄ Services/               # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AggregationService.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GroupScheduleService.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FirestoreAggregationService.swift
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Caching/            # In-memory cache
‚îÇ   ‚îú‚îÄ‚îÄ Infrastructure/         # –í–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Clients/            # HTTP –∫–ª–∏–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Parsing/            # HTML –ø–∞—Ä—Å–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Firestore/          # Firestore SDK
‚îÇ   ‚îú‚îÄ‚îÄ Presentation/Routes/    # API –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ Config/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ App/                        # API Server executable
‚îÇ   ‚îî‚îÄ‚îÄ main.swift
‚îî‚îÄ‚îÄ SyncRunner/                 # Data sync executable
    ‚îî‚îÄ‚îÄ main.swift

scripts/
‚îú‚îÄ‚îÄ sync-runner.sh              # Wrapper –¥–ª—è cron
‚îî‚îÄ‚îÄ setup-cron.sh               # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ cron job

docs/
‚îú‚îÄ‚îÄ FIRESTORE_SETUP.md          # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firestore
‚îú‚îÄ‚îÄ DEPLOYMENT.md               # –î–µ–ø–ª–æ–π –Ω–∞ VPS
‚îî‚îÄ‚îÄ ARCHITECTURE.md             # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- macOS 13+ –∏–ª–∏ Linux
- Swift 6.0+
- Docker (–¥–ª—è production build)

### –°–±–æ—Ä–∫–∞
```bash
swift build
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
swift test
```

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
```bash
swift-format -i -r Sources/
```

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –∫–ª–∏–µ–Ω—Ç–æ–º

**–ù–µ –º–µ–Ω—è–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç JSON –æ—Ç–≤–µ—Ç–æ–≤!** –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å API.

–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ DTO:
- `AggregateResponse` - –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å `teachers` (–º–∞—Å—Å–∏–≤ –í–°–ï–• –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π)
- `GroupScheduleResponse` - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
- `TeacherCard` - –∫–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
- `GroupInfo` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–ø–ø–µ

### Timezone

–í—Å–µ –≤—Ä–µ–º–µ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç **Europe/Warsaw** timezone –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è.

### –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –≤ aggregate

–° –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π `/api/groups/:id/aggregate` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–≤—Å–µ—Ö** –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≥—Ä—É–ø–ø—ã. –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

### Rate Limiting

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ live mode:
- Throttling –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∫ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—É
- In-memory cache –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏
- –†–∏—Å–∫ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∑–∞–ø—Ä–æ—Å–æ–≤

–†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ cached mode –≤ production.

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ health
```bash
curl https://api.dsw.wtf/groups/search
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# API –ª–æ–≥–∏
docker-compose logs -f vapor

# Sync –ª–æ–≥–∏
tail -f /var/log/dsw-sync.log
```

### –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Firestore: `metadata/lastSync`

### Firestore usage
Google Cloud Console ‚Üí Firestore ‚Üí Usage

## –õ–∏—Ü–µ–Ω–∑–∏—è

Proprietary - –≤—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **–ê–≤—Ç–æ—Ä**: LAPTop4iK
- **VPS**: api.dsw.wtf
- **–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç**: Dolno≈õlƒÖska Szko≈Ça Wy≈ºsza

---

–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –∏ Swift
